<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ZharVerify - Login OTP</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  :root {
    --gold1: #ffd700;
    --gold2: #b8860b;
    --bg: #000;
    --card: rgba(255, 215, 0, 0.06);
  }
  * {box-sizing: border-box; font-family: Poppins, system-ui, sans-serif;}
  body {
    margin: 0; display: flex; justify-content: center; align-items: center;
    min-height: 100vh;
    background: linear-gradient(135deg, #000000 0%, #1a1200 50%, #4b3600 100%);
    color: #fff;
  }
  .wrap {
    width: 90%; max-width: 420px;
    background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
    border: 1px solid rgba(255,215,0,0.15);
    border-radius: 16px;
    box-shadow: 0 0 25px rgba(184,134,11,0.1);
    padding: 25px;
  }
  h1 {color: var(--gold1); display: flex; gap: 10px; align-items: center; font-size: 22px;}
  p {font-size: 14px; color: rgba(255,255,255,0.8);}
  input {
    width: 100%; padding: 12px; border-radius: 10px; border: none;
    background: rgba(255,255,255,0.06); color: #fff; font-size: 15px;
    margin-top: 10px; outline: none;
  }
  button {
    width: 100%; padding: 12px; border-radius: 10px;
    border: none; margin-top: 12px; cursor: pointer;
    background: linear-gradient(90deg, var(--gold1), var(--gold2));
    color: #000; font-weight: bold; font-size: 15px;
  }
  button.ghost {
    background: transparent; border: 1px solid rgba(255,215,0,0.2);
    color: var(--gold1); font-weight: 600;
  }
  .hidden {display: none;}
  .notif {
    position: fixed; top: 15px; right: 15px;
    background: rgba(0,0,0,0.8);
    color: var(--gold1); padding: 12px 18px;
    border-radius: 10px; border: 1px solid rgba(255,215,0,0.3);
    box-shadow: 0 0 20px rgba(255,215,0,0.1);
    opacity: 0; transform: translateY(-10px);
    transition: all .3s ease;
    z-index: 999;
  }
  .notif.show {opacity: 1; transform: translateY(0);}
  footer {text-align: center; margin-top: 15px; font-size: 13px; color: rgba(255,255,255,0.6);}
</style>
</head>
<body>

<div class="notif" id="notif"></div>

<!-- Login -->
<div class="wrap" id="loginPage">
  <h1><i class="fa-solid fa-shield-halved"></i> Masuk</h1>
  <p>Masukkan email atau nomor HP kamu untuk menerima kode verifikasi.</p>
  <input type="text" id="userInput" placeholder="Email atau No HP">
  <button id="sendBtn">Kirim Kode Verifikasi</button>
  <footer>ZharVerify Â© 2025 â€” Tema Hitam & Emas</footer>
</div>

<!-- Verifikasi -->
<div class="wrap hidden" id="verifyPage">
  <h1><i class="fa-solid fa-key"></i> Verifikasi Kode</h1>
  <p>Kami telah mengirimkan kode 6 digit ke browser kamu.</p>
  <input type="text" id="otpInput" maxlength="6" placeholder="Masukkan Kode">
  <button id="verifyBtn">Verifikasi</button>
  <button class="ghost" id="resendBtn">Kirim Ulang</button>
  <footer><button class="ghost" id="backBtn">Kembali</button></footer>
</div>

<!-- Halaman Utama -->
<div class="wrap hidden" id="mainPage" style="text-align:center">
  <h1><i class="fa-solid fa-crown"></i> ZharVerify</h1>
  <p>Selamat datang, <span id="userDisplay" style="color:var(--gold1)"></span> ðŸ‘‘</p>
  <p>Kamu berhasil login menggunakan sistem verifikasi browser.</p>
  <button id="logoutBtn">Keluar</button>
</div>

<script>
(function(){
  const notif = document.getElementById("notif");
  const loginPage = document.getElementById("loginPage");
  const verifyPage = document.getElementById("verifyPage");
  const mainPage = document.getElementById("mainPage");
  const sendBtn = document.getElementById("sendBtn");
  const verifyBtn = document.getElementById("verifyBtn");
  const resendBtn = document.getElementById("resendBtn");
  const backBtn = document.getElementById("backBtn");
  const logoutBtn = document.getElementById("logoutBtn");
  const userInput = document.getElementById("userInput");
  const otpInput = document.getElementById("otpInput");
  const userDisplay = document.getElementById("userDisplay");

  let currentOTP = "";
  let currentUser = "";

  function showNotif(msg, duration=4000){
    notif.innerText = msg;
    notif.classList.add("show");
    setTimeout(()=> notif.classList.remove("show"), duration);
  }

  function sendOTP(){
    currentOTP = String(Math.floor(100000 + Math.random() * 900000));
    const message = `ðŸ‘‘ zharVerify: kode login kamu adalah ${currentOTP} â€” jangan kasih ke siapapun!`;

    // Coba tampilkan notifikasi browser (jika diizinkan)
    if (Notification && Notification.permission === "granted") {
      new Notification("zharVerify", { body: message, icon: "https://cdn-icons-png.flaticon.com/512/564/564619.png" });
    } else if (Notification && Notification.permission !== "denied") {
      Notification.requestPermission().then(permission => {
        if (permission === "granted") {
          new Notification("zharVerify", { body: message, icon: "https://cdn-icons-png.flaticon.com/512/564/564619.png" });
        } else {
          showNotif(message);
        }
      });
    } else {
      showNotif(message);
    }

    console.log("Kode OTP:", currentOTP); // buat debug
  }

  sendBtn.addEventListener("click", () => {
    const val = userInput.value.trim();
    if (!val) return alert("Masukkan email atau nomor HP dulu ya!");
    currentUser = val;
    loginPage.classList.add("hidden");
    verifyPage.classList.remove("hidden");
    sendOTP();
  });

  verifyBtn.addEventListener("click", () => {
    if (otpInput.value.trim() === currentOTP) {
      verifyPage.classList.add("hidden");
      mainPage.classList.remove("hidden");
      userDisplay.innerText = currentUser;
      showNotif("âœ… Verifikasi berhasil! Selamat datang ðŸ‘‘");
    } else {
      alert("Kode salah, coba lagi!");
    }
  });

  resendBtn.addEventListener("click", () => {
    sendOTP();
    showNotif("Kode baru dikirim ðŸ”");
  });

  backBtn.addEventListener("click", () => {
    verifyPage.classList.add("hidden");
    loginPage.classList.remove("hidden");
    otpInput.value = "";
  });

  logoutBtn.addEventListener("click", () => {
    mainPage.classList.add("hidden");
    loginPage.classList.remove("hidden");
    otpInput.value = ""; userInput.value = "";
    showNotif("Kamu telah keluar ðŸ‘‹");
  });
})();
</script>
</body>
</html>
